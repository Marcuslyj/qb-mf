(function(t){function e(e){for(var n,s,r=e[0],c=e[1],u=e[2],l=0,b=[];l<r.length;l++)s=r[l],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&b.push(i[s][0]),i[s]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(e);while(b.length)b.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,s=1;s<a.length;s++){var c=a[s];0!==i[c]&&(n=!1)}n&&(o.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},i={app:0},o=[];function s(t){return r.p+"js/"+({about:"about",subApp:"subApp"}[t]||t)+"."+{about:"c0ec7182",subApp:"f9761c40"}[t]+".js"}function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.e=function(t){var e=[],a=i[t];if(0!==a)if(a)e.push(a[2]);else{var n=new Promise((function(e,n){a=i[t]=[e,n]}));e.push(a[2]=n);var o,c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=s(t);var u=new Error;o=function(e){c.onerror=c.onload=null,clearTimeout(l);var a=i[t];if(0!==a){if(a){var n=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;u.message="Loading chunk "+t+" failed.\n("+n+": "+o+")",u.name="ChunkLoadError",u.type=n,u.request=o,a[1](u)}i[t]=void 0}};var l=setTimeout((function(){o({type:"timeout",target:c})}),12e4);c.onerror=c.onload=o,document.head.appendChild(c)}return Promise.all(e)},r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/qb-mf/",r.oe=function(t){throw console.error(t),t};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var d=u;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"2af9":function(t,e,a){"use strict";a.r(e);a("cfce"),a("ef1f"),a("918c"),a("fa8c"),a("868d");var n=a("da3a"),i=function(t){return t.keys().map(t)};e["default"]={install:function(t){i(n).forEach((function(e){var a=e.default;a.name&&t.component(a.name,a)}))}}},"36e1":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-nav"},[a("qb-menu-container",{attrs:{"menu-list":t.menuList},on:{"click-item":t.onClickMenuItem}})],1)},i=[],o={data:function(){return{menuList:[{menuName:"采购",icon:"iconHomebeifen16",children:[{menuName:"采购列表",url:"/sub1"}]},{menuName:"销售",icon:"iconHomebeifen16",children:[{menuName:"销售列表",url:"/sub2"}]}]}},methods:{onClickMenuItem:function(t){var e=t.data;this.$router.push({path:e.url}),this.$store.dispatch("addNavTabs",{id:e.url,name:e.menuName})},bindCurrent:function(){var t=window.location.pathname;this.current=t}}},s=o,r=(a("ce54"),a("2be6")),c=Object(r["a"])(s,n,i,!1,null,null,null);e["default"]=c.exports},"56d7":function(t,e,a){"use strict";a.r(e);a("9531"),a("26d3"),a("2007"),a("41ab");var n,i=a("9869"),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"portal"}},[a("Layout",{directives:[{name:"loading",rawName:"v-loading",value:t.pageLoading,expression:"pageLoading"}]},[a("keep-alive",[a("router-view")],1),t._l(t.subapps,(function(e){return a("div",{directives:[{name:"show",rawName:"v-show",value:t.$route.path.startsWith(t.getActiveRule(e)),expression:"$route.path.startsWith(getActiveRule(app))"}],key:e.name,staticClass:"router-view",attrs:{id:e.container.slice(1)}})}))],2)],1)},s=[],r=a("0b38"),c=(a("cfce"),a("868d"),a("2aa5"),a("32f5"),a("33ef"),a("841a"),a("defa0"),a("9ce4")),u=a("b4f6"),l=(a("ef14"),a("58d3"),a("ce37")),d=(a("bdf7"),a("11ed"),a("771c")),b="SET_PAGE_LOADING_STATE",p="SET_NAV_TABS",f="ADD_NAV_TABS",m="SET_ACTIVE_TAB_NAV",v="REMOVE_NAV_TABS";i["default"].use(c["a"]);var h=new c["a"].Store({state:{pageLoading:!1,navTabs:[],activeTabNav:"/"},mutations:(n={},Object(l["a"])(n,b,(function(t,e){t.pageLoading=e})),Object(l["a"])(n,p,(function(t,e){t.navTabs=e})),Object(l["a"])(n,f,(function(t,e){e&&"/"===e.id||(t.navTabs||[]).some((function(t){return t.id===e.id||"".concat(t.id,"/")===e.id}))||t.navTabs.push(e)})),Object(l["a"])(n,m,(function(t,e){var a=e.id;t.activeTabNav=a})),Object(l["a"])(n,v,(function(t,e){var a=e.id,n=e.to,i=t.navTabs.findIndex((function(t){return t.id===a}));t.navTabs.splice(i,1),t.navTabs.length?n&&n.path?t.activeTabNav=n.path:t.activeTabNav=0===i?t.navTabs[0].id:t.navTabs[i-1].id:t.activeTabNav="/"})),n),actions:{setLoading:function(t,e){var a=t.commit;a(b,e)},setNavTabs:function(t,e){var a=t.commit;a(p,e)},removeTabs:function(t,e){var a=t.commit;a(v,e)},addNavTabs:function(t,e){var a=t.commit;a(f,e),a(m,e)},setActiveTabNav:function(t,e){var a=t.commit;a(m,e)}},modules:{},plugins:[Object(d["a"])()]}),q=!0,_=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(t.entry,t.base),a=t.server;if(/localhost:5000/.test(location.host))return[a.dev,e,/\/$/.test(e)?"":"/"].join("");var n=location.host.match(/(dev|qa1?)-/);return n?[a[n[1]]||"",e,/\/$/.test(e)?"":"/"].join(""):[a.prod||"",e,/\/$/.test(e)?"":"/"].join("")},g=function(t){h.dispatch("removeTabs",t)},T=[{name:"sub1",entry:"//localhost:9000/",container:"#scm-purchase",base:"/sub1",server:{dev:"//localhost:5000",qa:"",prod:"//tomieric.github.io/qb-mf"}},{name:"sub2",entry:"//localhost:9200/",container:"#scm-finance",base:"/sub2",server:{dev:"//localhost:5000",prod:"//tomieric.github.io/qb-mf"}}],C=T.map((function(t){return Object(r["a"])(Object(r["a"])({},t),{},{entry:_(t),activeRule:q?"/qb-mf/#".concat(t.base):"#".concat(t.base),props:{routeBase:"".concat(t.base),store:h,closeNavTab:g}})})),y={data:function(){return{subapps:C.map((function(t){return{name:t.name,container:t.container,activeRule:t.activeRule}}))}},computed:Object(r["a"])({},Object(c["b"])({pageLoading:function(t){return t.pageLoading}})),watch:{$route:function(t){this.loadMicroApp(t)}},created:function(){this.cachedApp={}},methods:{getActiveRule:function(t){return t.activeRule.replace(/\/qb-mf\/#/,"")},loadMicroApp:function(t){var e=this,a=C.find((function(a){return t.path.startsWith(e.getActiveRule(a))}));if(a){var n=this.cachedApp[a.name];n||(this.$store.dispatch("setLoading",!0),Object(u["b"])(a,{singular:!1},{afterMount:function(){return e.$store.dispatch("setLoading",!1)}}),this.cachedApp[a.name]={app:a})}}}},w=y,N=(a("7c55"),a("2be6")),O=Object(N["a"])(w,o,s,!1,null,null,null),j=O.exports,A=(a("ef1f"),a("f3b8"),a("918c"),a("5f2b")),$=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("qb-row",{attrs:{gutter:6}},[a("qb-col",{attrs:{span:6}},[a("qb-card",[a("div",{staticClass:"media"},[a("i",{staticClass:"qb-icon-ice-drink"}),a("div",{staticClass:"media-content"},[a("span",[t._v("今日采购总数")]),a("b",[t._v("97%")])])])])],1),a("qb-col",{attrs:{span:6}},[a("qb-card",[a("div",{staticClass:"media"},[a("i",{staticClass:"qb-icon-grape"}),a("div",{staticClass:"media-content"},[a("span",[t._v("今日采购总额")]),a("b",[t._v("¥5000.00")])])])])],1),a("qb-col",{attrs:{span:6}},[a("qb-card",[a("div",{staticClass:"media"},[a("i",{staticClass:"qb-icon-truck"}),a("div",{staticClass:"media-content"},[a("span",[t._v("今日入库总额")]),a("b",[t._v("¥5000.00")])])])])],1),a("qb-col",{attrs:{span:6}},[a("qb-card",[a("div",{staticClass:"media"},[a("i",{staticClass:"qb-icon-sunrise-1"}),a("div",{staticClass:"media-content"},[a("span",[t._v("供应商履约率")]),a("b",[t._v("97%")])])])])],1)],1),a("qb-card",{staticStyle:{"margin-top":"6px"}},[a("div",{staticClass:"block-title",attrs:{slot:"header"},slot:"header"},[t._v("待处理事务")]),a("ul",{staticClass:"work-list"},t._l(8,(function(e){return a("li",{key:e},[a("div",{staticClass:"media"},[a("i",{class:t.icons[e]}),a("div",{staticClass:"media-content"},[a("span",[t._v("待审核报价")]),a("i",[t._v("王在轩在03-24 17:30发起了采购")])])])])})),0)]),a("qb-card",{staticStyle:{"margin-top":"6px"}},[a("div",{staticClass:"block-title",attrs:{slot:"header"},slot:"header"},[t._v("待处理事务")]),a("qb-timeline",[a("qb-timeline-item",{attrs:{timestamp:"2018/4/12",placement:"top",icon:"qb-icon-more",type:"primary"}},[a("qb-card",[a("h4",[t._v("更新 Github 模板")]),a("p",[t._v("王小虎 提交于 2018/4/12 20:46")])])],1),a("qb-timeline-item",{attrs:{timestamp:"2018/4/3",placement:"top",type:"success"}},[a("qb-card",[a("h4",[t._v("更新 Github 模板")]),a("p",[t._v("王小虎 提交于 2018/4/3 20:46")])])],1),a("qb-timeline-item",{attrs:{timestamp:"2018/4/2",placement:"top"}},[a("qb-card",[a("h4",[t._v("更新 Github 模板")]),a("p",[t._v("王小虎 提交于 2018/4/2 20:46")])])],1),a("qb-timeline-item",{attrs:{timestamp:"2018/4/2",placement:"top"}},[a("qb-card",[a("h4",[t._v("更新 Github 模板")]),a("p",[t._v("王小虎 提交于 2018/4/2 20:46")])])],1),a("qb-timeline-item",{attrs:{timestamp:"2018/4/2",placement:"top"}},[a("qb-card",[a("h4",[t._v("更新 Github 模板")]),a("p",[t._v("王小虎 提交于 2018/4/2 20:46")])])],1)],1)],1)],1)},k=[],x={name:"Home",data:function(){return{icons:["qb-icon-picture-outline-round","qb-icon-s-comment","qb-icon-s-claim","qb-icon-s-opportunity","qb-icon-s-custom","qb-icon-monitor","qb-icon-receiving","qb-icon-cpu","qb-icon-odometer"]}}},E=x,L=(a("8dd7"),Object(N["a"])(E,$,k,!1,null,"2cdebe80",null)),S=L.exports;i["default"].use(A["a"]);var M=[{path:"/",redirect:"home"},{path:"/home",name:"home",component:S},{path:"/about",name:"About",component:function(){return a.e("about").then(a.bind(null,"f820"))}},{path:"*",name:"subApp",component:function(){return a.e("subApp").then(a.bind(null,"f1ec"))}}],P=A["a"].prototype.push;A["a"].prototype.push=function(t){return P.call(this,t).catch((function(t){return t}))};var I=new A["a"]({base:"/qb-mf/",routes:M}),R=I,G=a("4ba0"),V=a.n(G),B=(a("bd4f"),a("2af9"));i["default"].config.productionTip=!1,i["default"].use(V.a),i["default"].use(B["default"]),console.log("subAppConfig",C),new i["default"]({router:R,store:h,render:function(t){return t(j)},mounted:function(){h.dispatch("setLoading",!1)}}).$mount("#portal")},"6d7e":function(t,e,a){"use strict";a("d7ed")},"78b9":function(t,e,a){"use strict";a("7adc")},"7adc":function(t,e,a){},"7c55":function(t,e,a){"use strict";a("9625")},"8dd7":function(t,e,a){"use strict";a("90a2")},"90a2":function(t,e,a){},9625:function(t,e,a){},9931:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("qb-page-tabs",{attrs:{home:t.home,tabs:t.tabs,"active-id":t.activeTabNav,"is-show-close-bar":!0},on:{"open-item":t.onClickTab,"close-item":t.onCloseTab,"close-other-item":t.onCloseOtherItem,"close-all-item":t.onCloseAllItem}})},i=[],o=a("0b38"),s=(a("2d6d"),a("9ce4")),r={data:function(){return{home:{id:"/"},tabs:[]}},computed:Object(o["a"])({},Object(s["b"])({navTabsCache:function(t){return t.navTabs},activeTabNav:function(t){return t.activeTabNav}})),watch:{navTabsCache:{handler:function(t){this.tabs=t,t.length||this.$router.push({path:"/"})},immediate:!0},activeTabNav:function(t){this.$route.path!==t&&this.$router.push({path:t}).catch((function(t){}))}},methods:{onClickTab:function(t){this.$store.dispatch("setActiveTabNav",t),this.$router.push({path:t.id})},onCloseTab:function(t){this.$store.dispatch("removeTabs",t)},onCloseAllItem:function(){this.tabs=[],this.$store.dispatch("setNavTabs",[]),this.$store.dispatch("setActiveTabNav",this.home)},onCloseOtherItem:function(t){this.tabs=this.tabs.filter((function(e){return e.id===t.id})),this.$store.dispatch("setNavTabs",this.tabs)}}},c=r,u=a("2be6"),l=Object(u["a"])(c,n,i,!1,null,null,null);e["default"]=l.exports},9951:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("qb-container",{staticClass:"q-layout"},[a("qb-header",{staticStyle:{padding:"0"}},[a("q-header")],1),a("qb-container",[a("qb-aside",{attrs:{width:"60px"}},[a("q-nav")],1),a("qb-main",{staticClass:"q-layout-main",staticStyle:{padding:"0"}},[a("qNavTabs"),a("div",{staticClass:"q-layout-content"},[t._t("default")],2)],1)],1)],1)},i=[],o=a("cff1"),s=a("36e1"),r=a("9931"),c={name:"Layout",components:{qHeader:o["default"],qNav:s["default"],qNavTabs:r["default"]}},u=c,l=(a("6d7e"),a("2be6")),d=Object(l["a"])(u,n,i,!1,null,"43e62b7e",null);e["default"]=d.exports},b127:function(t,e,a){},ce54:function(t,e,a){"use strict";a("b127")},cff1:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"q-header"},[a("h1",[a("qb-link",{attrs:{href:"/qb-mf/"}},[t._v("基座Portal")])],1),a("div",{staticClass:"q-header__profile"},[a("qb-dropdown",{on:{command:t.handleCommand}},[a("span",{staticClass:"qb-dropdown-link"},[a("qb-avatar",{attrs:{size:"small",src:"/qb-mf/avatar.png"}}),a("i",{staticClass:"qb-icon-arrow-down"})],1),a("qb-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("qb-dropdown-item",[t._v("个人信息")]),a("qb-dropdown-item",[t._v("注销")])],1)],1)],1)])},i=[],o={methods:{userLogout:function(){},handleCommand:function(){this.$store.dispatch("addNavTabs",{id:"/about",name:"关于"})}}},s=o,r=(a("78b9"),a("2be6")),c=Object(r["a"])(s,n,i,!1,null,"3a210960",null);e["default"]=c.exports},d7ed:function(t,e,a){},da3a:function(t,e,a){var n={"./common/Header.vue":"cff1","./common/Layout.vue":"9951","./common/Nav.vue":"36e1","./common/NavTabs.vue":"9931","./index.js":"2af9"};function i(t){var e=o(t);return a(e)}function o(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}i.keys=function(){return Object.keys(n)},i.resolve=o,t.exports=i,i.id="da3a"}});
//# sourceMappingURL=app.8cd75c3b.js.map